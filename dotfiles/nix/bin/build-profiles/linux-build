#!/bin/sh

GREEN='\033[1;32m'
RED='\033[1;31m'
CLEAR='\033[0m'

profile() {
        PROFILE="$(hostnamectl --pretty)"

        echo "${GREEN}Building profile for ${PROFILE}...${CLEAR}"
        ( home-manager switch --experimental-features "nix-command flakes" --flake .#$PROFILE ||
          nix --experimental-features "nix-command flakes" run home-manager/release-23.11 -- switch --flake .#$PROFILE ) &&
                echo "${GREEN}Finished building profile!${CLEAR}" ||
                echo "${RED}Build Error${CLEAR}"
}

profile
